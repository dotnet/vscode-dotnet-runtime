parameters:
  pool: ''
  SignType: ''
  useOneEngineeringPool: ''

jobs:
  - job: waitForValidation
    displayName: â˜ï¸ Wait for release approval
    pool: server
    timeoutInMinutes: 4320 # job times out in 3 days
    steps:
    - task: ManualValidation@0
      timeoutInMinutes: 4320
      inputs:
        instructions: 'Please validate that the release build has been tested, and resume to publish a new version'
        onTimeout: 'reject'
  - job: Publish
    pool:
      ${{ parameters.pool }}
    displayName: 'ğŸŒ Publish to Marketplace'
    dependsOn:
    - waitForValidation
    - ${{ parameters.pool.os }}_Package
    steps:
    - task: DownloadPipelineArtifact@2
      displayName: 'â¬‡ï¸ Download Packaged Extension'
      inputs:
        path: '$(System.ArtifactsDirectory)'
